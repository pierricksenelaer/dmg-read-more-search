(()=>{"use strict";var e,t={360:(e,t,r)=>{const a=window.wp.blocks,l=JSON.parse('{"UU":"create-block/dmg-read-more-search"}'),o=window.wp.element,n=window.wp.i18n,s=window.wp.blockEditor,c=window.wp.components,i=window.wp.apiFetch;var d=r.n(i);const{UU:m}=l;(0,a.registerBlockType)(m,{edit:e=>{const{attributes:{theme_color:t,postId:r,postTitle:a,postLink:l},setAttributes:i}=e,m=(0,s.useBlockProps)(),[p,u]=(0,o.useState)(""),[h,_]=(0,o.useState)([]),[g,v]=(0,o.useState)(!1),[E,w]=(0,o.useState)(1),[f,k]=(0,o.useState)(1);return(0,o.useEffect)((()=>{v(!0);const e=p?3:5,t=p?isNaN(p)?`/wp/v2/posts?search=${p}&per_page=${e}&page=${E}`:`/wp/v2/posts?include[]=${p}`:`/wp/v2/posts?per_page=${e}`;d()({path:t}).then((t=>{_(t),v(!1),p&&!isNaN(p)?k(1):p?d()({path:`/wp/v2/posts?search=${p}`}).then((t=>{k(Math.ceil(t.length/e))})):k(1)})).catch((()=>{v(!1)}))}),[p,E]),(0,o.createElement)("div",m,(0,o.createElement)(s.InspectorControls,null,(0,o.createElement)(c.Panel,null,(0,o.createElement)(c.PanelBody,{title:(0,n.__)("Post Selection","dmg-read-more-search")},(0,o.createElement)(c.TextControl,{label:(0,n.__)("Search Posts","dmg-read-more-search"),placeholder:(0,n.__)("Post ID or keyword","dmg-read-more-search"),value:p,onChange:e=>{u(e),w(1)}}),g&&(0,o.createElement)(c.Spinner,null),h.length>0&&(0,o.createElement)("ul",{className:"search-results"},h.map((e=>(0,o.createElement)("li",{key:e.id},(0,o.createElement)(c.Button,{onClick:()=>(e=>{i({postId:e.id,postTitle:e.title.rendered,postLink:e.link})})(e)},e.title.rendered))))),p&&f>1&&(0,o.createElement)("div",{className:"search-pagination"},(0,o.createElement)(c.Button,{disabled:1===E,onClick:()=>{E>1&&w(E-1)}},(0,n.__)("Previous","dmg")),(0,o.createElement)(c.Button,{disabled:E===f,onClick:()=>{E<f&&w(E+1)}},(0,n.__)("Next","dmg")),(0,o.createElement)("p",{className:"pagination__pages"},(0,n.__)("Page","dmg")," ",E," ",(0,n.__)("of","dmg")," ",f))),(0,o.createElement)(c.PanelBody,{title:"Link color"},(0,o.createElement)("fieldset",null,(0,o.createElement)("legend",{className:""},(0,n.__)("Pls select","dmg-read-more-search")),(0,o.createElement)(s.ColorPalette,{value:t,onChange:e=>{i({theme_color:e})}}))))),(0,o.createElement)(c.PanelBody,{title:(0,n.__)("LINK")},(0,o.createElement)("div",null,r?(0,o.createElement)("p",{className:"dmg-read-more"},(0,o.createElement)("a",{href:l},(0,n.__)("Read More: ","dmg"),a)):(0,o.createElement)("p",null,(0,n.__)("No post selected","dmg")))))},save:e=>{const{attributes:{theme_color:t,postTitle:r,postLink:a}}=e;if(!a)return null;const l=s.useBlockProps.save();return(0,o.createElement)("div",l,(0,o.createElement)("p",{className:"dmg-read-more"},(0,o.createElement)("a",{href:a,style:{color:`${t}`}},(0,n.__)("Read More: ","dmg"),r)))}})}},r={};function a(e){var l=r[e];if(void 0!==l)return l.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,r,l,o)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,l,o]=e[d],s=!0,c=0;c<r.length;c++)(!1&o||n>=o)&&Object.keys(a.O).every((e=>a.O[e](r[c])))?r.splice(c--,1):(s=!1,o<n&&(n=o));if(s){e.splice(d--,1);var i=l();void 0!==i&&(t=i)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,l,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var l,o,[n,s,c]=r,i=0;if(n.some((t=>0!==e[t]))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(c)var d=c(a)}for(t&&t(r);i<n.length;i++)o=n[i],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},r=globalThis.webpackChunkdmg_read_more_search=globalThis.webpackChunkdmg_read_more_search||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=a.O(void 0,[350],(()=>a(360)));l=a.O(l)})();